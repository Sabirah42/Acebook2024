<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
      xmlns:sec="https://www.thymeleaf.org/thymeleaf-extras-springsecurity5" >
<head lang="en">
    <meta charset="UTF-8"/>
    <title>Acebook</title>
    <link rel="stylesheet" href="/main.css" />
</head>
<body>

<!--Navigation bar-->
<nav>
    <!--Logout button-->
    <form name="logout" th:action="@{logout}" method="post">
        <input type="submit" value="Sign Out" />
    </form>

    <!--    Placeholder buttons-->

    <!--        All users button-->
    <form name="all_users" th:action="@{/all_users}" method="get">
        <input type="submit" value="All Users" />
    </form>
    <!--Profile button-->
    <form name="my_profile" th:action="@{/my_profile}" method="get">
        <input type="submit" value="Profile Page" />
    </form>
</nav>

<!--    Main page-->
<h1>Acebook</h1>
<h2>Feed</h2>
<!--Get username from authority table-->
<div sec:authorize="isAuthenticated()">
    Welcome <span sec:authentication="name"></span>!
</div>

<!--Create new post-->
<form action="#" th:action="@{/posts}" th:object="${post}" method="post">
    <p>Speak your mind: <input type="text" th:field="*{content}" /></p>
    <p><input type="submit" value="Submit" /> <input type="reset" value="Reset" /></p>
</form>
<!--List all posts-->
<ul th:each="post: ${posts}">
    <li>
        <span th:text="${post.content}" />
        <span th:text="${post.user.username}" />
        <button>Like</button>
        <button>Dislike</button>
    </li>
</ul>
</body>
</html>
